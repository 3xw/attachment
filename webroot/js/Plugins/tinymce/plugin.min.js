!function(a,t){var e,s,o=t.component("attachment-tinymce",{template:'<div><small><i>packed with attachment</i> ðŸ¤“</small><attachment-upload :aid="aid" :settings.sync="settings" ></attachment-upload><attachment-browse :aid="aid" :types="settings.types" :tags="settings.atags" :settings="settings" from="tinymce"></attachment-browse><attachment-inline-options :aid="aid" :file="file" :settings="settings"></attachment-inline-options></div>',props:{settings:Object,aid:String},data:function(){return{file:null}},created:function(){a.aEventHub[this.aid]=new t,a.aEventHub[this.aid].$on("browse-closed",this.openOptions),a.aEventHub[this.aid].$on("upload-closed",this.openOptions)},methods:{openOptions:function(){this.file=this.settings.attachments.shift(),this.file&&a.aEventHub[this.aid].$emit("show-options")}}});e=tinymce.util.Tools.resolve("tinymce.PluginManager"),s={createVueEl:function(t){var e=t.settings.attachment_settings,n=e.field,i=new o({propsData:{settings:e,aid:n}});i.$mount(),a.vueTinymce[n].$el.appendChild(i.$el)},addEventListener:function(n){var t=n.settings.attachment_settings.field;a.aEventHub[t].$on("options-success",function(t,e){s.addAttachment(n,e,t)})},addAttachment:function(t,e,n){var i=t.settings.attachment_settings;i.field;"Link"==n.displayAs?t.insertContent('<a href="'+e.fullpath+'" target="'+n.target+'">'+n.title+"</a>"):t.insertContent(s.createImageNode(i,e,n))},createImageNode:function(t,e,n){var i="<img",a="img-responsive img-fluid ";return a+=n.classes?n.classes+" ":"",i+=" class='"+(a+=n.align?n.align+" ":"")+"'",n.alt&&(i+=" alt='"+n.alt.replace(/['"]+/g,"")+"'"),i+=" src='"+s.getImagePath(t,e,n)+"'",i+=" />"},getImagePath:function(t,e,n){var i=t.thumbBaseUrl+"thumbnails/"+e.profile+"/";return i+=n.width?"w"+n.width:"w1200",i+=n.crop?"c"+n.cropWidth+"-"+n.cropHeight:"",i+="/"+e.path},addButton:function(t){var e=t.settings.attachment_settings.field;t.ui.registry.addMenuButton("attachment",{text:"MÃ©dia",icon:"image",fetch:function(t){t([{type:"menuitem",text:"TÃ©lÃ©charger",onAction:function(t){a.aEventHub[e].$emit("show-upload")}},{type:"menuitem",text:"Parcourir",onAction:function(t){a.aEventHub[e].$emit("show-browse")}}])}})}},e.add("attachment",function(t){s.createVueEl(t),s.addEventListener(t),s.addButton(t)})}(window,Vue);