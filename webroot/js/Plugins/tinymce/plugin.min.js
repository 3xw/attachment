!function(e,t){var n,a,i,s,o=t.component("attachment-tinymce",{template:'<div><small><i>packed with attachment</i> ðŸ¤“</small><attachment-upload :aid="aid" :settings.sync="settings" ></attachment-upload><attachment-browse :aid="aid" :types="settings.types" :tags="settings.atags" :settings="settings" from="tinymce"></attachment-browse><attachment-inline-options :aid="aid" :file="file" :settings="settings"></attachment-inline-options></div>',props:{settings:Object,aid:String},data:function(){return{file:null}},created:function(){e.aEventHub[this.aid]=new t,e.aEventHub[this.aid].$on("browse-closed",this.openOptions),e.aEventHub[this.aid].$on("upload-closed",this.openOptions)},methods:{openOptions:function(){this.file=this.settings.attachments.shift(),this.file&&e.aEventHub[this.aid].$emit("show-options")}}});n=tinymce.util.Tools.resolve("tinymce.PluginManager"),tinymce.util.Tools.resolve("tinymce.Env"),a=tinymce.settings.attachment_settings,i=a.field,s={createVueEl:function(){var t=new o({propsData:{settings:a,aid:i}});t.$mount(),e.vueTinymce[i].$el.appendChild(t.$el)},addEventListener:function(n){e.aEventHub[i].$on("options-success",function(t,e){s.addAttachment(n,e,t)})},addAttachment:function(t,e,n){"Link"==n.displayAs?t.insertContent('<a href="'+a.baseUrl+e.path+'" target="_blank">'+n.title+"</a>"):t.insertContent(s.createImageNode(e,n))},createImageNode:function(t,e){console.log(e),console.log(a);var n="<img",i="uk-responsive-width img-fluid ";return i+=e.classes?e.classes+" ":"",n+=" class='"+(i+=e.align?e.align+" ":"")+"'",e.alt&&(n+=" alt='"+e.alt.replace(/['"]+/g,"")+"'"),n+=" src='"+s.getImagePath(t,e)+"'",n+=" />"},getImagePath:function(t,e){var n=a.url+"thumbnails/"+t.profile+"/";return n+=e.width?"w"+e.width:"w1200",n+=e.crop?"c"+e.cropWidth+"-"+e.cropHeight:"",n+="/"+t.path},addButton:function(t){t.addButton("attachment",{type:"splitbutton",text:"MÃ©dia",icon:"image",menu:[{text:"TÃ©lÃ©charger",onclick:function(){e.aEventHub[i].$emit("show-upload")}},{text:"Parcourir",onclick:function(){e.aEventHub[i].$emit("show-browse")}}]})}},n.add("attachment",function(t){s.createVueEl(),s.addEventListener(t),s.addButton(t)})}(window,Vue);